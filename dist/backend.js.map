{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"fluture\"","webpack:///external \"express\"","webpack:///external \"sanctuary\"","webpack:///./routes/api/users.js","webpack:///./middleware/auth.js","webpack:///external \"mongoose\"","webpack:///external \"bcryptjs\"","webpack:///external \"fluture-sanctuary-types\"","webpack:///external \"jsonwebtoken\"","webpack:///./models/Users.js","webpack:///external \"path\"","webpack:///./routes/api/auth.js","webpack:///./models/Planets.js","webpack:///./routes/api/planets.js","webpack:///./models/Posts.js","webpack:///./routes/api/posts.js","webpack:///./server.js","webpack:///external \"nodemailer\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","model","secret","router","express","Router","S","checkTypes","env","concat","flutureEnv","toMaybe","x","Nothing","Just","eitherToFuture","either","Future","reject","of","getUser","User","params","rej","res","findOne","then","compose","checkUnique","user","chain","maybe","Right","_","Left","status","message","eitherNewUser","salt","encaseN","bcrypt","genSalt","hash","encaseN2","save","genToken","process","JWT_SECRET","encaseN3","jwt","sign","id","prop","expiresIn","post","req","body","email","password","json","msg","map","pw","bimap","token","fork","e","obj","next","header","decoded","verify","err","mongoose","UserSchema","Schema","type","String","required","unique","register_date","default","Date","now","compare","maybeToFuture","maybeToEither","unhashed","_id","auth","findById","select","PlanetSchema","Planet","find","exec","planets","end","planet","deleteOne","success","PostSchema","authorId","title","maxlength","createdAt","Post","savePost","returnedPosts","patch","findByIdAndUpdate","new","updatedPost","port","PORT","app","uri","MONGODB_URI","dbOptions","eventualConnection","connect","options","main","startDBIfCommandline","mainModule","console","error","log","use","send","NASA_API_KEY","usersRouter","planetsRouter","authRouter","postRouter","sendFile","path","resolve","__dirname","isJust","isMain","listen","startServerIfCommandline"],"mappings":"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","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","module.exports = require(\"fluture\");","module.exports = require(\"express\");","module.exports = require(\"sanctuary\");","// Import dependencies\nimport express from 'express'\nimport bcrypt from 'bcryptjs'\nimport jwt from 'jsonwebtoken'\nimport nodemailer from 'nodemailer'\nimport Future from 'fluture'\nimport { env as flutureEnv } from 'fluture-sanctuary-types'   // Type defs for Fluture\nimport { create, env } from 'sanctuary'\n\nconst router = express.Router()                             // Initialize router\nconst S = create({                                          // Initialize type environment\n  checkTypes: true,\n  env: env.concat(flutureEnv)\n})\n\nimport User from '../../models/Users'\n\n// toMaybe :: a -> Maybe a\nexport const toMaybe = (x) => x === null || x === undefined ? S.Nothing : S.Just (x)\n\n// eitherToFuture :: Either e r -> Future e r\nexport const eitherToFuture = S.either (Future.reject) (Future.of)\n\n// getModel :: String -> {} -> Future Error (Maybe {})\nexport const getModel = (model) => (params) => Future ((rej, res) => {\n  model\n    .findOne({ ...params })\n    .then (S.compose (res) (toMaybe))\n    .catch(rej)\n})\n\n// getUser :: {} -> Future Error (Maybe {})\nexport const getUser = getModel (User)\n\n// eitherNewUser :: {} -> Maybe {} -> Either String {}\nconst eitherNewUser = (user) => S.maybe\n  (S.Right ({...user}))\n  (_ => S.Left ({\n    status: 400,\n    message: 'User already exists'\n  }))\n\n// checkUnique :: {} -> String -> Future Error {}\nexport const checkUnique = (user) => S.compose \n  (S.chain (S.compose (eitherToFuture) (eitherNewUser (user))))\n  (getUser)\n\n// salt :: Number -> Future Error String\nconst salt = Future.encaseN (bcrypt.genSalt)\n\n// hash :: String -> String -> Future Error String\nconst hash = Future.encaseN2 (bcrypt.hash)\n\n// saltAndHash :: Number -> String -> Future Error String\nexport const saltAndHash = (n) => (pw) => salt (n) .chain (hash (pw))\n\n// save :: {} -> Future Error {}\nexport const save = (user) => Future ((rej, res) => {\n  user.save().then(res).catch(rej)\n})\n\n// signToken :: String -> {} | nil -> {} -> Future Error String\nexport const signToken = (secret) => (params) => (user) => Future.encaseN3 (jwt.sign) ({ id: S.prop ('id') (user) }) (secret) (params) \n\n// genToken :: {} -> Future Error String\nexport const genToken = signToken (process.env.JWT_SECRET) ({ expiresIn: 3600 })\n\n// @route POST /api/users\n// @desc Register new users\n// @access Public\nrouter.post('/', (req, res) => {\n  const { name, email, password } = req.body\n\n  if (!name || !email || !password) {\n    res.status(400).json({ msg: 'Please enter all fields' })\n  }\n\n  const eventualToken = checkUnique ({ password }) ({ email })\n    .map (S.prop ('password'))\n    .chain (saltAndHash (13))\n    .map (pw => new User({ name, email, password: pw }))\n    .chain (save)\n    .chain (r => genToken (r)\n      .bimap (\n        _ => ({ status: 400, message: 'Error signing token' }),\n        token => ({ token, user: { name: r.name, email: r.email, password: r.password } }))\n    )\n\n  eventualToken\n    .fork(\n      e => res.status(e.status).json({ msg: e.message }),\n      obj => res.json(obj)\n    )\n})\n\nexport default router\n","const jwt = require('jsonwebtoken')\n\nconst auth = (req, res, next) => {\n  const token = req.header('x-auth-token')\n\n  if (!token) return res.status(401).json({ msg: 'No token, authorization denied' })\n\n  try {\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n    req.user = decoded\n    next()\n  } catch (err) {\n    res.status(400).json({ msg: 'Token is not valid' })\n  }\n}\n\nmodule.exports = auth\n","module.exports = require(\"mongoose\");","module.exports = require(\"bcryptjs\");","module.exports = require(\"fluture-sanctuary-types\");","module.exports = require(\"jsonwebtoken\");","const mongoose = require('mongoose')\nconst Schema = mongoose.Schema\n\nlet UserSchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  register_date: {\n    type: String,\n    default: Date.now\n  }\n})\n\nconst User = mongoose.model('user', UserSchema)\n\nexport default User\n","module.exports = require(\"path\");","import express from 'express'\nconst router = express.Router()\nimport bcrypt from 'bcryptjs'\nimport jwt from 'jsonwebtoken'\nimport * as Future from 'fluture'\nimport { env as flutureEnv } from 'fluture-sanctuary-types'\nimport { create, env } from 'sanctuary'\nimport {\n  getUser,\n  eitherToFuture,\n  genToken,\n  signToken\n} from './users'\n\nconst S = create({ checkTypes: true, env: env.concat(flutureEnv) })\n\nimport auth from '../../middleware/auth'\nimport User from '../../models/Users'\n\n// compare :: String -> String -> Future Error Boolean\nexport const compare = Future.encaseP2 (bcrypt.compare)\n\n// validateUser :: String -> {} -> Future Error {}\nexport const validateUser = (unhashed) => (user) => S.compose\n  (S.compose (S.chain (x => x ?\n    Future.of (user) :\n    Future.reject ({ status: 400, message: 'Invalid credentials' }))) (compare (unhashed)))\n  (S.prop ('password')) (user)\n\n// getUserById :: String -> Future (Maybe {})\nconst getUserById = (id) => Future.Future ((rej, res) => {\n  User\n    .findById ({ id })\n    .select ('-password')\n    .then (toMaybe (res))\n    .catch (rej)\n})\n\n// maybeToFuture :: {} -> Maybe a -> Future {} a\nexport const maybeToFuture = S.compose (eitherToFuture) (S.maybeToEither)\n\n// @route  POST /api/auth\n// @desc   Authorize user\n// @access Public\nrouter.post('/', (req, res) => {\n  const { email, password } = req.body\n\n  // Simple validation\n  if (!email || !password) {\n    res.status(400).json({ msg: 'Please enter all fields' })\n  }\n\n  const eventualResponse = getUser ({ email })\n    .chain (maybeToFuture ({ status: 400, message: 'User does not exist' }))\n    .chain (validateUser (password))\n    .chain (r => genToken (r) \n      .bimap (\n        _ => ({ status: 400, message: 'Error signing token' }),\n        token => ({ token, user: { id: r._id, name: r.name, email: r.email } })))\n\n  eventualResponse\n    .fork(\n      e => res .status (e.status) .json ({ msg: e.message }),\n      obj => res .json (obj)\n    )\n})\n\n// @route  GET /api/auth/user\n// @desc   Get user data\n// @access Private\nrouter.get('/user', auth, (req, res) => {\n  const eventualResponse = getUserById (req.user.id)\n    .chain (maybeToFuture ({ status: 400, message: 'User not found' }))\n\n  eventualResponse\n    .fork (\n      e => res .status (e.status) .json ({ msg: e.message }),\n      obj => res .json (obj)\n    )\n})\n\nexport default router\n","const mongoose = require('mongoose')\nconst Schema = mongoose.Schema\n\nlet PlanetSchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  }\n})\n\nconst Planet = mongoose.model('planet', PlanetSchema)\n\nexport default Planet\n","// Import modules\nimport express from 'express'\nconst router = express.Router()\nimport mongoose from 'mongoose'\n\n// Import models\nimport Planet from '../../models/Planets'\n\n// @route   GET /api/planets\n// @desc    Get planets from db\n// @access  Public\nrouter.get('/', (req, res) => {\n  Planet.find().exec((err, planets) => {\n    if (err) {\n      res.end(err)\n    }\n    res.json(planets)\n  })\n})\n\n// @route    POST /api/planets\n// @desc     Add new planet\n// @accesss  Public\nrouter.post('/', (req, res) => {\n  const newPlanet = new Planet({\n    name: req.body.name\n  })\n\n  newPlanet.save().then(planet => res.json(planet))\n})\n\n// @route   DELETE /api/planets/:id\n// @desc    Delete a planet\n// @access  Public\nrouter.delete('/:id', (req, res) => {\n  Planet\n    .deleteOne({ _id: req.params.id })\n    .then(res => res.json({success: true}))\n    .catch(err => res.json({success: false}))\n})\n\nexport default router\n","const mongoose = require('mongoose')\nconst Schema = mongoose.Schema\n\nlet PostSchema = new Schema({\n  authorId: {\n    type: String,\n    required: true\n  },\n  title: {\n    type: String,\n    required: true,\n  },\n  body: {\n    type: String,\n    maxlength: 5000,\n    required: true\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nconst Post = mongoose.model('post', PostSchema)\n\nexport default Post\n","import express from 'express'\nconst router = express.Router()\n\nimport Post from '../../models/Posts'\n\n// Import middlware\nimport auth from '../../middleware/auth'\n\n// @route POST /api/posts\n// @desc  Create new post\n// @access Private\nrouter.post('/', auth, (req, res) => {\n  const {\n    title,\n    body,\n  } = req.body\n\n  const authorId = req.user.id\n\n  const newPost = new Post({\n    title,\n    body,\n    authorId\n  })\n\n  // Save new post\n  newPost\n    .save()\n    .then( savePost => {\n      res.json(savePost)\n    })\n    .catch( err => {\n      res.status(400).json({ msg: 'Error saving post' })\n    })\n})\n\n// @route   GET /api/posts/user\n// @desc    Get array of posts by user\n// @access  Private\nrouter.get('/user', auth, (req, res) => {\n  Post.find({ authorId: req.user.id })\n    .exec((err, returnedPosts) => {\n      if (err) {\n        res.end(err)\n      }\n      res.json(returnedPosts)\n    })\n})\n\n// @route   DELETE /api/posts/:id\n// @desc    Delete post\n// @access  Private\nrouter.delete('/:id', auth, (req, res) => {\n  Post\n    .deleteOne({ _id: req.params.id })\n    .then(res => res.json({ success: true }))\n    .catch(err => res.json({ success: false }))\n})\n\n// @route   PATCH /api/posts/edit\n// @desc    Edit post\n// @access  Public\nrouter.patch('/edit', auth, (req, res) => {\n  Post\n    .findByIdAndUpdate(\n      req.body._id,\n      { title: req.body.title, body: req.body.body },\n      { new: true }\n    )\n    .then(updatedPost => {\n      res.json(updatedPost)\n    })\n    .catch(err => res.status(400).json({ msg: 'Error updating post' }))\n})\n\nexport default router\n","// Import modules\nimport express from 'express'\nimport mongoose from 'mongoose'\nimport bcrypt from 'bcryptjs'\nimport jwt from 'jsonwebtoken'\nimport path from 'path'\nimport Future from 'fluture'\nimport { create, env } from 'sanctuary'\nimport { env as flutureEnv } from 'fluture-sanctuary-types'\n\nconst S = create({ checkTypes: true, env: env.concat(flutureEnv) })\n\n// Import routes\nimport usersRouter, { toMaybe, eitherToFuture } from './routes/api/users'\nimport planetsRouter from './routes/api/planets'\nimport authRouter from './routes/api/auth'\nimport postRouter from './routes/api/posts'\n\nconst port = process.env.PORT || 5000\n\nconst isMain = (main) => S.isJust (toMaybe (main)) \n\n// initialize server\nconst app = express()\n\n// Connect to db\nexport const uri = process.env.MONGODB_URI\n\nexport const dbOptions = {\n  \"useNewUrlParser\": true,\n  \"useCreateIndex\": true,\n  \"useFindAndModify\": false\n}\n\nconst eventualConnection = Future.encaseN2 (mongoose.connect)\n\nconst startDBIfCommandline = (uri) =>\n  (options) =>\n  (main) => S.compose (eitherToFuture) (S.maybeToEither ('Testing')) (toMaybe (main))\n    .chain (_ => eventualConnection (uri) (options))\n\nstartDBIfCommandline (uri) (dbOptions) (process.mainModule)\n  .fork(\n    console.error,\n    _ => console.log('>>> ðŸ›¢  DB connected...')\n  )\n\napp.use(express.json())\n\napp.get('/config.js', (req, res) => {\n  res.send(\"const NASA_API_KEY='\"+process.env.NASA_API_KEY+\"'\")\n})\n\n// Add api routers\napp.use('/api/users', usersRouter)\napp.use('/api/planets', planetsRouter)\napp.use('/api/auth', authRouter)\napp.use('/api/posts', postRouter)\n\napp.use(express.static('client/dist'))\n\napp.get('*', (req, res) => {\n  res.sendFile(path.resolve(__dirname, 'client', 'dist', 'index.html'))\n})\n\n// Listen on port\nconst startServerIfCommandline = (main) =>\n  (app) =>\n  (port) => isMain (main) ?\n    S.Just (app.listen(port, () => console.log (`>>> ðŸ“¡ Listening on ${port}...`))) :\n    S.Nothing\n\nstartServerIfCommandline (process.mainModule) (app) (port)\n\n","module.exports = require(\"nodemailer\");"],"sourceRoot":""}